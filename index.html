<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
				
				function makeMessage (elem, cName, data,){
					//helper function to create and append messages
				var messageBox = document.createElement(elem);
				messageBox.className = cName;
				messageBox.innerHTML = data;
			 
				return messageBox;
				}


				var logo = document.createElement('img');
				logo.id = 'siteLogo';
				logo.src='https://cdn.iconscout.com/public/images/icon/premium/png-192/pigeon-carrier-mail-news-communication-3e93c7d306eed270-192x192.png';
				header.appendChild(logo);

				// For Loop to itirate through the array and label data:

				for (var i = 0; i < window.geemails.length; i++){

					var mailbox = makeMessage('div', 'mail', null);
					mailbox.className = 'mailNumber'
					main.appendChild(mailbox);

					var img = document.createElement('img');
					img.className = 'sendericon';
					img.src = 'https://cdn.shopify.com/s/files/1/0655/6853/products/Preciosa_DSC_0993.jpg?v=1527573825';
					mailbox.appendChild(img);
					
					var dateSection = makeMessage ('div', 'messageDate', window.geemails[i].date);
					mailbox.appendChild(dateSection);

					var senderSection = makeMessage('div','messageSender', 'From: ' + window.geemails[i].sender);
					mailbox.appendChild(senderSection);

					var subjectSection = makeMessage('div','messageSubject','Subject: ' + window.geemails[i].subject);
					mailbox.appendChild(subjectSection);
					
					var bodySection = document.createElement('div')
					bodySection.id = 'messBody';
					mailbox.appendChild(bodySection);
		
					// Button to show message:

					var showMessbtn = document.createElement('BUTTON');
					showMessbtn.className = 'showMessagebtn';
					showMessbtn.innerHTML = 'Show Message';
					bodySection.appendChild(showMessbtn);	

					var bodydata = makeMessage ('div', 'messageBody', window.geemails[i].body);
					bodySection.appendChild(bodydata);	

					var byeByeBirdy = document.createElement('BUTTON');
					byeByeBirdy.className = 'byeByeBirdy';
					byeByeBirdy.innerHTML = 'Shoo Birdy!'
					bodydata.appendChild(byeByeBirdy);

				}



				var selectbutton = document.getElementsByClassName('showMessagebtn');

				for (var i = 0; i < selectbutton.length; i++){
				selectbutton[i].addEventListener('click', hideShow)
				}

				function hideShow(){
					if (this.innerHTML === 'Show Message'){
						this.innerHTML = 'Hide Message';
					}else{
						this.innerHTML = 'Show Message';
					}
				}
				
				for (var i = 0; i < selectbutton.length; i++){
					selectbutton[i].addEventListener('click', showMessageData);
				}
				
				function showMessageData(){
					var messDatashow = this.nextElementSibling
					console.log(messDatashow)
    			if (messDatashow.style.display === 'block'){
        			messDatashow.style.display = 'none';
    					}else {
        			messDatashow.style.display = 'block';
    }
				}
				
				//Message Counter:

				var countHeader = document.createElement('h3');
				var messageCountClass = document.getElementsByClassName('mailNumber')
				var messageCount = messageCountClass.length
				countHeader.id = 'countMail'
				countHeader.innerHTML = 'You have ' + messageCount + ' messages!';
				header.appendChild(countHeader);
			
			var byeByeBirdyBtn = document.getElementsByClassName('byeByeBirdy');

				for (var i = 0; i < byeByeBirdyBtn.length; i++){
					byeByeBirdyBtn[i].addEventListener('click', shooBird);
				}
				
				function shooBird(){
					var parentDiv = this.parentElement.parentElement.parentElement;
					parentDiv.remove();
					var messageCountClass = document.getElementsByClassName('mailNumber')
					 var messageCount = messageCountClass.length
					 var getCountClass = document.getElementById('countMail')
						getCountClass.innerHTML = 'You have ' + messageCount + ' 	messages!';
					header.appendChild(getCountClass);
				}
				
			

      };
    </script>
	</head>
	<body>
		<div id="header">
		<h1 id = "titleHeader">The E Carrier Pigeon</h1>
		</div>


		<div class="container" id="main">
		</div>
	</body>
</html>